# 第二题（Q2）完整总结

## 一、解题思路

### 核心问题

**"哪种投票方法更偏向粉丝投票？"** - 对比排名制、百分比制和排名+评委拯救制三种规则对比赛结果的影响。

### 方法论：静态反事实分析（Static Counterfactual Analysis）

- **"多重宇宙"模拟器**：对历史上的每个周次（Week），保持输入数据不变（裁判打分和Q1估计的粉丝份额），应用三种不同的淘汰规则，观察"谁会被淘汰"
- **关键约束**：只分析历史上实际发生的每一周，不进行动态推演（不假设被淘汰选手在后续周次的虚构分数）
- **"上帝视角"数据**：使用Q1贝叶斯估计的粉丝份额作为事实基准

## 二、建模思路

### 三个平行宇宙的定义

1. **Universe A: 排名制（Rank System）** - 第1-2季规则
   - 逻辑：裁判排名 + 粉丝排名 = 总分数
   - 淘汰：总分最高者淘汰
   - 平局判定：总分相同时，粉丝排名较差者淘汰

2. **Universe B: 百分比制（Percent System）** - 第3-27季规则
   - 逻辑：裁判份额% + 粉丝份额% = 总份额%
   - 淘汰：总份额最小者淘汰
   - 特性：对极值敏感（Bobby Bones效应）

3. **Universe C: 排名+评委拯救制（Rank+Save）** - 第28-34季规则
   - 逻辑：先按排名制算出总分数
   - 识别Bottom 2（最后两名）
   - 在Bottom 2中，裁判分数高者被拯救，裁判分数低者被淘汰

### 关键建模细节

- **并列处理**：统一使用`method='average'`（并列第2名，排名均为2.5）
- **Bottom 2逻辑**：精确识别最后两名，处理平局情况
- **数据验证**：System C与第28-34季实际结果对比验证（83.93%准确率）

## 三、量化指标

### 1. 逆转率（Reversal Rate）

- 定义：排名制淘汰A而百分比制淘汰B的周次占比
- 结果：13.43%（1/7的周次结果不同）

### 2. 粉丝权重指数（Fan Power Index, FPI）

- 定义：最终排名与粉丝份额的Spearman相关系数（绝对值）
- 结果：
  - 百分比制：0.847（最高粉丝影响力）
  - 排名制：0.793
  - 排名+拯救制：0.793

### 3. 技术安全网（Merit Safety Rate）

- 定义：裁判分数倒数前三名的选手在该规则下的存活率
- **修正后的解读**：
  - 百分比制：71.59% → 对低分选手保护最强，形成"人气保护盾"
  - 排名制：68.99% → 中等保护
  - 排名+拯救制：68.00% → **最有利于高技术水平选手**（最无情清洗低分选手）

## 四、代码文件

### 核心脚本

- `src/rule_comparison.py`（731行） - 多重宇宙模拟器主程序
  - 数据加载与合并
  - 三种规则的具体实现
  - 指标计算（逆转率、FPI、技术安全网）
  - 可视化生成
  - 验证与输出

### 依赖脚本

- `src/monte_carlo_bayesian_dirichlet.py` - Q1贝叶斯估计（提供粉丝份额数据）
- `src/data_processing.py` - 数据预处理
- `src/evaluate_models.py` - Q1模型评估

## 五、产出文件

### 数据文件（`results/question2/`）

1. `counterfactual_outcomes.csv` - 每周三种规则的淘汰结果
   - 包含13.43%的逆转率周次
   - 标记是否发生规则冲突（is_flipped）

2. `counterfactual_rankings.csv` - 每位选手每周的三种规则排名
   - 2777个选手-周次观察值
   - 包含是否为裁判低分选手标记

### 可视化文件（`results/plots/question2/`）

1. `q2_fan_bias_comparison.png` - 粉丝权重指数对比图
   - 显示百分比制粉丝影响力最大（0.847）

2. `q2_merit_safety.png` - 技术安全网对比图
   - **修正后解读**：百分比制对低分选手保护最强，排名+拯救制最有利高技术选手

3. `q2_bobby_bones_survival.png` - Bobby Bones虚拟排名轨迹图
   - 显示在排名+拯救制下第8周被淘汰

### 分析报告

- `q2_counterfactual_report.md` - 完整分析报告（已修正Merit Safety Rate解读）

## 六、论文表述要点（中文）

### 摘要核心观点

1. **百分比制最偏向粉丝投票**（FPI=0.847），相比排名制（0.793）粉丝影响力提升6.8%
2. **规则敏感性中等**：13.43%的周次在不同规则下产生不同淘汰结果
3. **Bobby Bones问题得到解决**：在排名+拯救制下第8周被淘汰
4. **技术安全网解读修正**：百分比制形成"人气保护盾"，排名+拯救制最有利于高技术选手

### 关键发现表述

- **百分比制的"人气保护盾"效应**：71.59%的低分选手存活率，说明粉丝影响力可有效保护技术不足但人气高的选手
- **排名+拯救制的"技术保护"本质**：68.00%的低分选手存活率最低，表明该规则最严格筛选技术能力
- **规则变迁的合理性**：从百分比制回归排名制并引入评委拯救，有效平衡了娱乐性与技术性

### 政策建议

1. **娱乐性优先**：推荐百分比制，最大化粉丝参与度，适合追求收视率和话题性的赛季
2. **技术性优先**：推荐排名+拯救制，保证舞蹈技术质量的公正评价
3. **平衡方案**：建议根据赛季主题灵活选择规则
